<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="theme-color" content="#69D2E7" />
  <title>Bubble Login ¬∑ Cartoon Style</title>
  <link href="https://fonts.googleapis.com/css2?family=Baloo+2:wght@500;600;700&family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
  <style>
    /* =========================
       Bubble‚ÄëCartoon Login UI
       Mobile‚Äëfirst, responsive
       ========================= */
    :root{
      --bg: #F9FCFF;            /* airy background */
      --ink: #0A1B2A;           /* primary text */
      --muted: #5B7085;         /* secondary text */
      --card: #FFFFFF;          /* surfaces */
      --accent: #69D2E7;        /* sky blue */
      --accent-2: #A7F3D0;      /* mint */
      --cta: #FF7AB6;           /* pink button */
      --cta-ink: #3B0B1B;
      --error: #FF5A5A;
      --ok: #2ECC71;
      --line: #0A1B2A;          /* cartoon outlines */
      --shadow: 0 10px 0 var(--line); /* thick drop shadow */
      --radius: 20px;
      --radius-sm: 14px;
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; background: radial-gradient(1200px 600px at 10% -10%, #F0FAFF 20%, transparent 60%),
                              radial-gradient(900px 500px at 110% 10%, #EBFFF7 10%, transparent 55%), var(--bg);
      color:var(--ink); font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, sans-serif;
      display:grid; place-items:center; padding: 20px;
    }

    .shell{width:100%; max-width: 980px; display:grid; gap:18px; align-items:stretch}

    /* Card + Illustration split (stacks on mobile) */
    .grid{display:grid; gap:16px}
    @media (min-width: 860px){
      .grid{grid-template-columns: 1.05fr 1fr; align-items:stretch}
    }

    .card{
      background: var(--card);
      border: 3px solid var(--line);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding: 22px;
      position:relative;
      overflow:hidden;
      isolation:isolate;
    }

    .brand{
      display:flex; align-items:center; gap:10px; margin-bottom: 6px;
      font-family: "Baloo 2", system-ui, sans-serif;
    }
    .brand-logo{ width:42px; height:42px; border-radius:50%; background: conic-gradient(from 200deg, var(--accent), var(--accent-2), #fff); border:3px solid var(--line); box-shadow: 0 4px 0 var(--line); display:grid; place-items:center; }
    .brand-logo span{font-size:22px}
    .brand h1{ font-size: 28px; line-height:1; margin:0 }
    .brand small{ display:block; color:var(--muted); font-weight:600; margin-top:4px }

    .tag{
      display:inline-flex; align-items:center; gap:8px; padding:6px 10px; border-radius:999px; background: var(--accent-2);
      border:2px solid var(--line); box-shadow: 0 5px 0 var(--line); font-weight:700; font-size:12px; letter-spacing:.2px; margin: 8px 0 12px
    }

    form{ display:grid; gap:14px; margin-top: 10px }

    .field{
      display:grid; gap:8px;
    }
    .label{
      font-weight:800; font-size:14px; letter-spacing:.2px; font-family: "Baloo 2", system-ui, sans-serif;
    }
    .input{
      display:flex; align-items:center; gap:10px; background:#fff; border:3px solid var(--line); border-radius: var(--radius-sm);
      padding: 12px 14px; position:relative; box-shadow: 0 6px 0 var(--line);
    }
    .input input{ border:0; outline:0; width:100%; font-size:15px; background:transparent; color:var(--ink)}
    .input input::placeholder{ color:#9FB0BE }

    .toggle-eye{ cursor:pointer; border:2px solid var(--line); padding:6px 10px; border-radius:12px; font-weight:800; background:#fff; box-shadow:0 4px 0 var(--line) }
    .toggle-eye:active{ transform: translateY(2px); box-shadow:0 2px 0 var(--line) }

    .row{ display:flex; align-items:center; justify-content:space-between; gap:12px; flex-wrap:wrap }

    .chk{ display:flex; align-items:center; gap:10px; font-size:14px; user-select:none }
    .chk input{ appearance:none; width:22px; height:22px; border:3px solid var(--line); border-radius:7px; display:grid; place-items:center; position:relative; box-shadow:0 4px 0 var(--line); background:#fff; }
    .chk input:checked{ background:var(--accent-2) }
    .chk input:checked::after{ content:"‚úì"; font-weight:800; position:absolute }

    .btn{
      appearance:none; border:3px solid var(--line); background: var(--cta);
      color:#fff; font-weight:800; letter-spacing:.5px; font-size:16px; border-radius: 16px; padding: 12px 16px; width:100%;
      box-shadow: 0 8px 0 var(--line); cursor:pointer;
    }
    .btn:active{ transform: translateY(3px); box-shadow: 0 5px 0 var(--line) }
    .btn[disabled]{ opacity:.6; cursor:not-allowed }

    .links{ display:flex; justify-content:space-between; font-size:13px; gap:8px; flex-wrap:wrap }
    .links a{ color:#0A58CA; font-weight:700; text-decoration:none; border-bottom:2px solid transparent }
    .links a:hover{ border-color:#0A58CA }

    .notice{ border:3px solid var(--line); background:#FFF4F4; color:#8B1A1A; padding:10px 12px; border-radius: 14px; font-weight:700; display:none }
    .notice.show{ display:block; animation: pop .15s ease-out }

    .success{ background:#EEFFF5; color:#0A5A2A }

    /* Cartoon illustration */
    .art.card{ display:grid; place-items:center; padding:0; min-height: 320px }
    .bubbles{ position:absolute; inset:0; pointer-events:none; }
    .bubble{ position:absolute; width:90px; height:90px; border-radius:50%; border:3px solid var(--line); background:radial-gradient(circle at 30% 30%, #fff, var(--accent)); opacity:.7; filter:saturate(110%); animation: floaty 8s ease-in-out infinite }
    .bubble.b2{ width:64px; height:64px; left:12%; top:18%; animation-duration: 7s }
    .bubble.b3{ width:110px; height:110px; right:10%; top:30%; animation-duration: 9s }
    .bubble.b4{ width:56px; height:56px; left:8%; bottom:10%; animation-duration: 6.2s }

    .mascot{ width: 82%; max-width: 460px; aspect-ratio: 1 / 1; position:relative; z-index:1 }
    .mascot .face{ background:#fff; border:4px solid var(--line); border-radius: 28px; box-shadow: 0 10px 0 var(--line); padding:20px; position:relative }
    .mascot .eyes{ display:flex; justify-content:space-between; gap:20px; margin-top:8px }
    .eye{ width: 70px; height: 70px; background:#111; border-radius:50%; border:4px solid var(--line); position:relative; overflow:hidden }
    .eye::after{ content:""; position:absolute; width:18px; height:18px; background:#fff; border-radius:50%; left:20%; top:22%; box-shadow: 0 0 0 4px #000 inset }
    .smile{ width: 160px; height: 80px; border:4px solid var(--line); border-bottom-left-radius:140px; border-bottom-right-radius:140px; border-top:none; margin: 14px auto 0; background: conic-gradient(from 200deg, var(--accent-2), #fff); box-shadow: 0 6px 0 var(--line) }

    /* tiny wiggle on focus for fun */
    .input:focus-within{ animation: wiggle .18s ease-in-out }

    @keyframes wiggle{ 0%{transform:rotate(0)} 30%{transform:rotate(-.6deg)} 70%{transform:rotate(.6deg)} 100%{transform:rotate(0)} }
    @keyframes pop{ from{ transform:scale(.98)} to{ transform:scale(1)} }
    @keyframes floaty{ 0%{ transform: translateY(0)} 50%{ transform: translateY(-12px)} 100%{ transform: translateY(0)} }

    footer{ text-align:center; color:var(--muted); font-weight:700; font-size:12px; margin-top:6px }

    /* Mobile eye idle animation */
    .mobile .eye{ animation: eye-bob 2.2s ease-in-out infinite }
    @keyframes eye-bob{ 0%{ transform: translate(0,0)} 50%{ transform: translate(6px,-6px)} 100%{ transform: translate(0,0)} }
  </style>
</head>
<body>
  <main class="shell" aria-label="Login">
    <div class="grid">
      <!-- Login Card -->
      <section class="card" aria-live="polite">
        <div class="brand">
          <div class="brand-logo" aria-hidden="true"><span>üí¨</span></div>
          <div>
            <h1>Sign in to Bubble</h1>
            <small>Cartoon‚Äëclean, fast & friendly</small>
          </div>
        </div>
        <div class="tag">ü´ß Tap‚Äëfriendly ¬∑ Works great on mobile & desktop</div>

        <div id="alert" class="notice" role="alert"></div>

        <form id="loginForm" novalidate>
          <div class="field">
            <label class="label" for="email">Email</label>
            <div class="input">
              <span aria-hidden="true">üìß</span>
              <input id="email" name="email" type="email" inputmode="email" autocomplete="email" placeholder="you@example.com" required />
            </div>
          </div>

          <div class="field">
            <div class="row" style="width:100%">
              <label class="label" for="password">Password</label>
              <button type="button" id="togglePwd" class="toggle-eye" aria-pressed="false" aria-controls="password" title="Show/Hide password">üëÅ</button>
            </div>
            <div class="input">
              <span aria-hidden="true">üîí</span>
              <input id="password" name="password" type="password" autocomplete="current-password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" minlength="6" required />
            </div>
          </div>

          <div class="row">
            <label class="chk"><input id="remember" type="checkbox" /> Remember me</label>
            <a href="#" onclick="demoForgot(); return false;">Forgot password?</a>
          </div>

          <button class="btn" id="submitBtn" type="submit">Sign In</button>

          <div class="links" style="margin-top:10px">
            <span>New here? <a href="#" onclick="demoSignup(); return false;">Create account</a></span>
            <a id="helpLink" href="https://t.me/your_handle" target="_blank" rel="noopener">Help</a>
          </div>
        </form>
      </section>

      <!-- Illustration Card -->
      <aside class="art card" aria-hidden="true">
        <div class="bubbles">
          <div class="bubble" style="left:6%; top:8%"></div>
          <div class="bubble b2"></div>
          <div class="bubble b3"></div>
          <div class="bubble b4"></div>
        </div>
        <div class="mascot">
          <div class="face">
            <div class="eyes"><div class="eye"></div><div class="eye"></div></div>
            <div class="smile"></div>
          </div>
        </div>
      </aside>
    </div>

    <footer>Made with üíñ Bubbles ¬∑ Fully client‚Äëside ¬∑ Plug into your backend easily</footer>
  </main>

  <script>
    // ===== Utilities =====
    const byId = (id) => document.getElementById(id);
    const emailEl = byId('email');
    const pwdEl = byId('password');
    const form = byId('loginForm');
    const alertBox = byId('alert');
    const submitBtn = byId('submitBtn');
    const togglePwdBtn = byId('togglePwd');

    // Reduce layout jank on Android Chrome address bar show/hide
    document.documentElement.style.height = '100%';

    // Password show/hide toggle
    togglePwdBtn.addEventListener('click', () => {
      const isText = pwdEl.type === 'text';
      pwdEl.type = isText ? 'password' : 'text';
      const pressed = !isText;
      togglePwdBtn.setAttribute('aria-pressed', String(pressed));
      togglePwdBtn.textContent = pressed ? 'üôà' : 'üëÅ';
      pwdEl.focus();
    });

    // Basic client-side validation
    function showError(msg){
      alertBox.className = 'notice show';
      alertBox.textContent = msg;
    }
    function showSuccess(msg){
      alertBox.className = 'notice show success';
      alertBox.textContent = msg;
    }

    function isValidEmail(v){
      return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(v);
    }

    // Demo submit handler (replace with your API)
    form.addEventListener('submit', async (e) => {
      e.preventDefault();
      alertBox.className = 'notice';
      const email = emailEl.value.trim();
      const password = pwdEl.value;

      if(!email || !password){ return showError('Please enter your email and password.'); }
      if(!isValidEmail(email)){ return showError('That email looks off. Try again?'); }
      if(password.length < 6){ return showError('Password must be at least 6 characters.'); }

      // Loading state
      submitBtn.disabled = true;
      const prev = submitBtn.textContent;
      submitBtn.textContent = 'Signing in‚Ä¶';

      try{
        // ===== Integrate here =====
        // Example: call your backend or Supabase
        // const { data, error } = await supabase.auth.signInWithPassword({ email, password });
        // if(error) throw error;
        await new Promise(r => setTimeout(r, 900)); // simulate network

        // Simple demo rule: accept if password === 'bubblepop'
        if(password !== 'bubblepop') throw new Error('Invalid credentials');

        showSuccess('Welcome back! Redirecting‚Ä¶');
        // Redirect (skipped in self-test mode)
        if(!window.__TEST__){
          setTimeout(()=>{ window.location.href = './dashboard.html'; }, 600);
        }
      }catch(err){
        showError(err.message || 'Could not sign you in.');
      }finally{
        submitBtn.disabled = false;
        submitBtn.textContent = prev;
      }
    });

    // Demo link handlers
    function demoSignup(){ showError('Sign up screen not included ‚Äî route this link to your signup page.'); }
    function demoForgot(){ showError('Forgot password flow not wired ‚Äî link this to your reset page.'); }

    // ===== Optional: store remembered email locally (Android-friendly) =====
    const rememberEl = document.getElementById('remember');
    // Load
    const savedEmail = localStorage.getItem('bubble.email');
    if(savedEmail){ emailEl.value = savedEmail; rememberEl.checked = true; }
    // Save on submit
    form.addEventListener('submit', () => {
      if(rememberEl.checked){ localStorage.setItem('bubble.email', emailEl.value.trim()); }
      else{ localStorage.removeItem('bubble.email'); }
    });

    // ===== Mascot eyes =====
    const eyes = document.querySelectorAll('.eye');
    const isCoarse = window.matchMedia && window.matchMedia('(pointer: coarse)').matches;
    if(!isCoarse){
      // Desktop / precise pointer: follow the cursor
      document.addEventListener('pointermove', (e)=>{
        eyes.forEach(eye => {
          const rect = eye.getBoundingClientRect();
          const cx = rect.left + rect.width/2; const cy = rect.top + rect.height/2;
          const angle = Math.atan2(e.clientX - cx, e.clientY - cy);
          const dx = Math.sin(angle) * 12; const dy = Math.cos(angle) * 12;
          eye.style.transform = `translate(${dx}px, ${-dy}px)`;
        });
      });
    } else {
      // Mobile / coarse pointer: idle animation
      document.body.classList.add('mobile');
    }

    // ===== Lightweight self-tests (run with ?test or localStorage flag) =====
    function runSelfTests(){
      const results = [];
      const ok = (name, pass, note='') => { results.push({name, pass, note}); console[pass?'log':'error']((pass?'‚úÖ':'‚ùå')+' '+name+(note?` ‚Äî ${note}`:'')); };

      try{ ok('Email input present', !!emailEl); }catch(e){ ok('Email input present', false, e.message); }
      try{ ok('Password input present', !!pwdEl); }catch(e){ ok('Password input present', false, e.message); }
      try{ ok('Submit button present', !!submitBtn); }catch(e){ ok('Submit button present', false, e.message); }

      // Validate client checks
      emailEl.value = 'not-an-email'; pwdEl.value = '123456';
      form.dispatchEvent(new Event('submit', {cancelable:true, bubbles:true}));
      ok('Invalid email rejected', /looks off/i.test(alertBox.textContent));

      // Valid email, wrong password
      emailEl.value = 'test@example.com'; pwdEl.value = 'wrong';
      form.dispatchEvent(new Event('submit', {cancelable:true, bubbles:true}));
      setTimeout(()=>{
        ok('Wrong password shows error', /invalid credentials/i.test(alertBox.textContent));
        // Valid success path (no redirect during test)
        window.__TEST__ = true;
        emailEl.value = 'user@example.com'; pwdEl.value = 'bubblepop';
        form.dispatchEvent(new Event('submit', {cancelable:true, bubbles:true}));
        setTimeout(()=>{
          ok('Correct password shows success', /welcome back/i.test(alertBox.textContent));
          console.log('Self-tests complete:', results);
        }, 1000);
      }, 1200);
    }

    (function maybeRunTests(){
      const params = new URLSearchParams(location.search);
      if(params.has('test') || localStorage.getItem('bubble.selftest')==='1'){
        console.log('Running Bubble Login self-tests‚Ä¶');
        runSelfTests();
      } else {
        console.log('Tip: add ?test to the URL or set localStorage key "bubble.selftest" = "1" to run self-tests.');
      }
    })();
  </script>
</body>
</html>
